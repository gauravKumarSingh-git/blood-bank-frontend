<h2>Hospital Details</h2>
<div class="table-cover">
    <table class="table table-striped"
       >
        <thead>
          <tr>
            <th scope="col">S.No</th>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">State</th>
            <th scope="col">City</th>
            <th scope="col">Address</th>
            <th scope="col">Phone Number</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let hospital of hospitals; index as i">
            <th scope="row">{{i+1}}</th>
            <td [ngStyle]="{'color': '#42429c'}">{{ hospital.username }}</td>
            <td>{{ hospital.email }}</td>
            <td>{{ hospital.state }}</td>
            <td>{{ hospital.city }}</td>
            <td>{{ hospital.address }}</td>
            <td>{{ hospital.phoneNumber }}</td>
            <td>
              <button 
                class="btn" 
                type="button" 
                (click)="open(content, hospital)">
                <mat-icon [ngStyle]="{'color':'green'}">edit</mat-icon>

              </button>
            </td>
          </tr>
        </tbody>
    </table>
</div>

<div class="pagination">
  <button class="page-change-button" (click)="previousPage()">
    <mat-icon class="material-symbols-outlined">
    chevron_left
    </mat-icon>
  </button>
  <form class="page-cover" #pageForm="ngForm" (ngSubmit)="onPageChange(pageForm)">
    Page 
    <input type="number" class="page-input" ngModel id="page" name="page" [placeholder]="page">
    <span>of {{totalPages}}</span>
  </form>
  <button class="page-change-button" (click)="nextPage()">
    <mat-icon class="material-symbols-outlined">
      chevron_right
    </mat-icon>
  </button>
</div>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title col-10" id="modal-basic-title">Profile update</h4>
    <button
      type="button"
      class="btn-close col-2"
      style="width: 20px"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body" >
    <form class="form" [formGroup]="updateForm" (ngSubmit)="onSubmit()">
      <div class="form-group" style="text-align: center; margin: 10px; font-size: 20px;">{{ updateForm.get('username')?.value }}</div>
      <div class="form-group">
        <label for="email" class="form-label">Email</label>
        <input 
          type="email" 
          class="form-control" 
          formControlName="email" />
          <div class="text-danger" *ngIf="updateForm.get('email')?.touched && updateForm.get('email')?.hasError('required')">
            Please provide email
          </div>
          <div class="text-danger" *ngIf="updateForm.get('email')?.touched && updateForm.get('email')?.hasError('email')">
            Please enter valid email
          </div>
      </div>
      <div class="form-group">
        <label for="state" class="form-label">State</label>
        <input
          type="text"
          id="state"
          name="state"
          class="form-control"
          formControlName="state"
        />
        <div class="text-danger" *ngIf="updateForm.get('state')?.touched && updateForm.get('state')?.hasError('required')">
          Please select state
        </div>
      </div>
      <div class="form-group">
        <label for="city" class="form-label">City</label>
        <input
          type="text"
          id="city"
          name="city"
          class="form-control"
          formControlName="city"
        />
        <div class="text-danger" *ngIf="updateForm.get('city')?.touched && updateForm.get('city')?.hasError('required')">
          Please provide City
        </div>
      </div>
      <div class="form-group">
        <label for="address" class="form-label">Address</label>
        <input
          type="text"
          id="address"
          name="address"
          class="form-control"
          formControlName="address"
        />
        <div class="text-danger" *ngIf="updateForm.get('address')?.touched && updateForm.get('address')?.hasError('required')">
          Please provide Address
        </div>
      </div>
      <div class="form-group">
        <label for="phoneNumber" class="form-label">PhoneNumber</label>
        <input
          type="number"
          id="phoneNumber"
          name="phoneNumber"
          class="form-control"
          formControlName="phoneNumber"
        />
        <div class="text-danger" *ngIf="updateForm.get('phoneNumber')?.touched && updateForm.get('phoneNumber')?.hasError('required')">
          Please provide Phone Number
        </div>
      </div>
      <button type="submit" class="btn btn-success" style="margin: 20px;" (click)="modal.close()" [disabled]="updateForm.invalid">Update</button>
    </form>
  </div>
</ng-template>

<app-toasts aria-live="polite" aria-atomic="true"></app-toasts>